!function(t){var e={};function i(s){if(e[s])return e[s].exports;var a=e[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=new(i(1).FeedBackForm);window.validateAndSubmit=()=>{s.validateAndSubmit()}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.FeedBackForm=class{constructor(){this.fields={},this.isValidationActive=!1,this.toastrShown=!1,this.baseUrl="https://us-central1-snowmaster-feedback.cloudfunctions.net",this.initForm(),this.fetchProducts(),this.setToastrOptions()}initForm(){this.fields={name:{element:$("#name-input")},company:{element:$("#company-input")},date:{element:$("#date-input")},products:{element:$("#product-select")},"order-submission":{element:$(".order-submission-star-label"),value:0},"punctuality-rating":{element:$(".punctuality-star-label"),value:0},"discipline-rating":{element:$(".discipline-star-label"),value:0},"product-handling-rating":{element:$(".product-handling-star-label"),value:0},"product-satisfaction-rating":{element:$(".product-satisfaction-star-label"),value:0},comment:{element:$("#comment-input")}},this.registerOrderSubmissionEvents(),this.registerPunctualityRatingEvents(),this.registerDisciplineRatingEvents(),this.registerProductHandlingRatingEvents(),this.registerProductSatisfactionRatingEvents()}registerOrderSubmissionEvents(){Object.keys(this.fields["order-submission"].element).forEach(t=>{const e=$(this.fields["order-submission"].element[t]);"length"!==t&&"prevObject"!==t&&e.on("click",t=>{this.updateOrderSubmissionRating(t)})})}registerPunctualityRatingEvents(){Object.keys(this.fields["punctuality-rating"].element).forEach(t=>{const e=$(this.fields["punctuality-rating"].element[t]);"length"!==t&&"prevObject"!==t&&e.on("click",t=>{this.updatePunctualityRating(t)})})}registerDisciplineRatingEvents(){Object.keys(this.fields["discipline-rating"].element).forEach(t=>{const e=$(this.fields["discipline-rating"].element[t]);"length"!==t&&"prevObject"!==t&&e.on("click",t=>{this.updateDisciplineRating(t)})})}registerProductHandlingRatingEvents(){Object.keys(this.fields["product-handling-rating"].element).forEach(t=>{const e=$(this.fields["product-handling-rating"].element[t]);"length"!==t&&"prevObject"!==t&&e.on("click",t=>{this.updateProductHandlingRating(t)})})}registerProductSatisfactionRatingEvents(){Object.keys(this.fields["product-satisfaction-rating"].element).forEach(t=>{const e=$(this.fields["product-satisfaction-rating"].element[t]);"length"!==t&&"prevObject"!==t&&e.on("click",t=>{this.updateProductSatisfactionRating(t)})})}updatePunctualityRating(t){this.isValidationActive&&this.validate(),this.fields["punctuality-rating"].value=Number(t.currentTarget.attributes[0].value)}updateOrderSubmissionRating(t){this.isValidationActive&&this.validate(),this.fields["order-submission"].value=Number(t.currentTarget.attributes[0].value)}updateDisciplineRating(t){this.isValidationActive&&this.validate(),this.fields["discipline-rating"].value=Number(t.currentTarget.attributes[0].value)}updateProductHandlingRating(t){this.isValidationActive&&this.validate(),this.fields["product-handling-rating"].value=Number(t.currentTarget.attributes[0].value)}updateProductSatisfactionRating(t){this.isValidationActive&&this.validate(),this.fields["product-satisfaction-rating"].value=Number(t.currentTarget.attributes[0].value)}fetchProducts(){let t=[];$.ajax({url:this.baseUrl+"/getAllProducts",method:"POST",success:e=>{t=e.filter(t=>!0===t.data.isActive),console.log(t),this.fields.products.element.html("<option value='default' >Select a product</option>"),t.forEach(t=>{const e=this.fields.products.element.html();this.fields.products.element.html(e+`<option value="${t.data.id}">${t.data.name}</option>`)})}})}validateAndSubmit(){this.isValidationActive=!0,this.toastrShown=!1,this.validate()&&this.submit().then(()=>{this.clearFormFields(),this.showSuccessMessage()})}validate(){let t=!0;return Object.keys(this.fields).forEach(e=>{let i="";switch(e){case"name":case"company":""===(i=this.fields[e].element.val())?(t=!1,this.fields[e].element.attr("placeholder","Required"),this.fields[e].element.css("border-bottom","1px solid red")):this.fields[e].element.css("border-bottom","1px solid white"),this.fields[e].element.on("keyup",()=>{this.validate()});break;case"products":"default"===(i=this.fields[e].element.val())?(t=!1,this.fields[e].element.attr("placeholder","Required"),this.fields[e].element.css("border-bottom","1px solid red"),this.fields[e].element.css("color","rgb(255, 151, 151)")):(this.fields[e].element.css("color","white"),this.fields[e].element.css("border-bottom","1px solid white")),this.fields[e].element.on("change",()=>{this.validate()});break;case"date":""===(i=this.fields[e].element.val())?(t=!1,this.fields[e].element.css("color"," rgb(255, 151, 151)"),this.fields[e].element.css("border-bottom","1px solid red")):(this.fields[e].element.css("color","white"),this.fields[e].element.css("border-bottom","1px solid white")),this.fields[e].element.on("change",()=>{this.validate()});break;case"order-submission":this.toastrShown||0!==this.fields["order-submission"].value||(this.toastrShown=!0,t=!1,toastr.error("Please provide ratings"));break;case"punctuality-rating":this.toastrShown||0!==this.fields["punctuality-rating"].value||(this.toastrShown=!0,t=!1,toastr.error("Please provide ratings"));break;case"discipline-rating":this.toastrShown||0!==this.fields["discipline-rating"].value||(this.toastrShown=!0,t=!1,toastr.error("Please provide ratings"));break;case"product-handling-rating":this.toastrShown||0!==this.fields["product-handling-rating"].value||(this.toastrShown=!0,t=!1,toastr.error("Please provide ratings"));break;case"product-satisfaction-rating":this.toastrShown||0!==this.fields["product-satisfaction-rating"].value||(this.toastrShown=!0,t=!1,toastr.error("Please provide ratings"));break;case"comment":i=this.fields[e].element.val(),this.fields[e].element.css("border-bottom","1px solid white"),this.fields[e].element.on("keyup",()=>{this.validate()})}}),t}clearFormFields(){this.isValidationActive=!1,Object.keys(this.fields).forEach(t=>{let e="";switch(t){case"name":case"company":case"products":case"date":case"comment":e=this.fields[t].element.val("")}})}formatData(){return{name:this.fields.name.element.val(),company:this.fields.company.element.val(),date:this.fields.date.element.val(),product:this.fields.products.element.val(),order_submission_rating:this.fields["order-submission"].value,punctuality_rating:this.fields["punctuality-rating"].value,discipline_rating:this.fields["discipline-rating"].value,product_handling_rating:this.fields["product-handling-rating"].value,product_satisfaction_rating:this.fields["product-satisfaction-rating"].value,comment:this.fields.comment.element.val(),recorded_on:+new Date}}submit(){const t=this.formatData();return $("#submit-button").html("Submitting"),$("#submit-button").attr("disabled","true"),new Promise(e=>{$.ajax({url:this.baseUrl+"/submitFeedback",method:"POST",data:t,success:()=>{console.log("k"),e(!0)}})})}showSuccessMessage(){$(".dim").css("display","block")}setToastrOptions(){toastr.options={closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!1,positionClass:"toast-top-right",preventDuplicates:!0,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"}}}}]);